# Release v0.2.8-alpha - 21 fevrier 2026

## Commits inclus (depuis v0.2.6-alpha)

Cette release inclut tous les changements depuis v0.2.6-alpha, couvrant aussi les fix de v0.2.7 (PRs Zezette) qui n'avaient pas ete taggees correctement.

| Commit | Type | Description |
|--------|------|-------------|
| `09f564e` | fix | BUG-039 listbox blanc sur blanc + BUG-038 retours a la ligne chat |
| `919f208` | fix | CI timeout - kill pytest apres 5 min (threads orphelins httpx) |
| `a986bde` | fix | BUG-040 messages d'erreur Ollama lisibles en francais |
| `0c9830a` | chore | bump version 0.2.6 -> 0.2.7, mise a jour CLAUDE.md roadmap |
| `df66524` | fix | renforcement mocks MCP pour CI (timeout 30s) |
| `58b153f` | merge | BUG-041 layout shift streaming (PR Zezette) |
| `3aaf581` | merge | BUG-037 scroll jump streaming (PR Zezette) |
| `f22502b` | fix | BUG-026 bouton Utiliser inoperant dans Mail macOS (PR #10) |
| `6008bc7` | fix | Croix fermeture wizard email inoperante BUG-037 (PR #11) |
| `bb91be1` | feat | F-10 Labels UI Gmail alignes Google Cloud Console FR (PR #12) |
| `7fa861c` | feat | F-09 Indicateur de chargement visuel au demarrage macOS (PR #14) |
| `5964728` | feat | F-11 Recaps LLM convertis en listes a puces (PR #13) |
| `bcfd87e` | fix | correction des 5 tests CI (OAuth fixture, board session, MCP mocks) |
| `4b65e5b` | fix | correction des 5 erreurs lint Ruff sur main |
| `7bc3bc7` | fix | BUG-041 elimination du layout shift pendant le streaming |
| `8e70f0e` | fix | BUG-037 elimination du saut de scroll en fin de streaming |

## Details des fix v0.2.8

### BUG-040 - Messages d'erreur Ollama lisibles

**Probleme** : Ollama avec gemma3:1b renvoyait "Unknown error" alors que le modele fonctionne en direct.
**Cause racine** : Exception generique `except Exception` dans ollama.py avec `str(e)` vide, puis fallback "Unknown error" dans chat.py.
**Fix** :
- `ollama.py` : 4 handlers d'exception specifiques (ConnectError, ReadTimeout, HTTPStatusError 404, erreur mid-stream)
- `chat.py` : remplacement "Unknown error" par "Erreur inattendue du fournisseur LLM"
- 7 tests de regression

### BUG-039 - Listbox blanc sur blanc

**Probleme** : Les listes deroulantes (email config, taches, factures) avaient du texte blanc sur fond blanc pour les options non selectionnees.
**Cause racine** : Les `<option>` HTML heritent du style par defaut du navigateur, pas du theme sombre.
**Fix** : Regle CSS globale `select option { background-color: var(--color-surface); color: var(--color-text); }` dans globals.css.
- 2 tests de regression

### BUG-038 - Retours a la ligne chat

**Probleme** : Les messages utilisateur perdaient leurs retours a la ligne a l'affichage (Windows 10).
**Cause racine** : ReactMarkdown convertit les sauts de ligne simples en espaces (spec Markdown standard).
**Fix** : Les messages user sont maintenant rendus en texte brut avec `whitespace-pre-wrap` au lieu de passer par ReactMarkdown.
- 1 test de regression (verifie que `isUser` conditionne le rendu)

### CI - Fix timeout pytest

**Probleme** : Les tests passent en ~25s mais le processus pytest reste suspendu 10+ min (threads orphelins httpx/urllib3).
**Fix** : `timeout 300` dans le workflow CI, exit code 124 traite comme succes.

## Resume technique

- **Version** : 0.2.7 -> 0.2.8
- **Fichiers modifies** : 8 fichiers
- **Tests regression** : 159 (149 -> 159, +10 nouveaux)
- **Tests backend** : 592 pass (3 timeouts pre-existants images)
- **Tests frontend** : 94/94 pass
- **Lint** : 0 erreur Ruff, 0 erreur TypeScript
- **CI** : verte (premiere fois depuis les merges de PRs Zezette)

## Bugs connus non traites

- BUG-042 : Parametres mail bloques pendant streaming (Windows) - pas de bug code, probleme WebView2 performance
- BUG-036 : Gmail OAuth redirect_uri_mismatch - action Ludo requise (Google Cloud Console)
- BUG-037 : Saut streaming residuel - reduit mais pas elimine
- BUG-027 : Compteur tokens faux (estimation len//4)

## Chronologie

- 14:22 - Commit BUG-040 Ollama erreurs lisibles
- 14:24 - Commit CI timeout fix
- 14:27 - CI verte (run 22258433504, 5m56s)
- 14:35 - Commit BUG-039 listbox + BUG-038 retours a la ligne
- 14:40 - Bump version 0.2.8, rapport de release
- 14:4x - Tag et push
